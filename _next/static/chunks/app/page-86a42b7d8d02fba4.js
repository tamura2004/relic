(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4135:(e,l,s)=>{Promise.resolve().then(s.bind(s,8510))},8510:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>ec});var n=s(5155),i=s(2115),t=s(8492),r=s(2531),d=s(317),a=s(6245),c=s(357),x=s(9300),h=s(5416),o=s(670),A=s(7154),j=s(4177),u=s(9919),f=s(8963),g=s(7855),m=s(8447),v=s(5970),p=s(6120),S=s(223),b=s(4463),C=s(1512),y=s(6388),I=s(4288),k=s(1665),W=s(6170);let w="relic_effects",E="relic_relics",N="relic_categories",O="relic_nightrunners",z="relic_grails",J="default_other",_={getAll:()=>{let e=localStorage.getItem(N),l=e?JSON.parse(e):[];return l.find(e=>e.id===J)||(l.unshift({id:J,name:"その他"}),localStorage.setItem(N,JSON.stringify(l))),l},save:e=>{localStorage.setItem(N,JSON.stringify(e))}},U={getAll:()=>{let e=localStorage.getItem(w),l=e?JSON.parse(e):[],s=l.map(e=>e.categoryId?e:{...e,categoryId:J});return s.some((e,s)=>e!==l[s])&&localStorage.setItem(w,JSON.stringify(s)),s},save:e=>{localStorage.setItem(w,JSON.stringify(e))}},D={getAll:()=>{let e=localStorage.getItem(E);return e?JSON.parse(e):[]},save:e=>{localStorage.setItem(E,JSON.stringify(e))}},R={getAll:()=>{let e=localStorage.getItem(O);return e?JSON.parse(e):[]},save:e=>{localStorage.setItem(O,JSON.stringify(e))}},F={getAll:()=>{let e=localStorage.getItem(z);return e?JSON.parse(e):[]},save:e=>{localStorage.setItem(z,JSON.stringify(e))}};var M=s(5265),B=s(2021),P=s(9496),V=s(6370);function q(e){let{open:l,effect:s,categories:t,onSave:r,onClose:d}=e,[a,x]=(0,i.useState)(""),[h,m]=(0,i.useState)(J);return(0,i.useEffect)(()=>{s?(x(s.description),m(s.categoryId||J)):(x(""),m(J))},[s]),(0,n.jsxs)(M.A,{open:l,onClose:d,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(B.A,{children:s?"効果を編集":"効果を登録"}),(0,n.jsx)(P.A,{children:(0,n.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"カテゴリ"}),(0,n.jsx)(u.A,{value:h,label:"カテゴリ",onChange:e=>m(e.target.value),children:t.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))})]}),(0,n.jsx)(o.A,{autoFocus:!0,label:"効果",fullWidth:!0,value:a,onChange:e=>x(e.target.value)})]})}),(0,n.jsxs)(V.A,{children:[(0,n.jsx)(g.A,{onClick:d,children:"キャンセル"}),(0,n.jsx)(g.A,{onClick:()=>{r({id:(null==s?void 0:s.id)||crypto.randomUUID(),categoryId:h,description:a}),x(""),m(J)},variant:"contained",disabled:!a,children:"保存"})]})]})}function G(){let[e,l]=(0,i.useState)([]),[s,t]=(0,i.useState)([]),[r,d]=(0,i.useState)(""),[a,x]=(0,i.useState)(""),[h,w]=(0,i.useState)(null),[E,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{l(U.getAll()),t(_.getAll())},[]);let O=e.filter(e=>{let l=e.description.includes(r),s=!a||e.categoryId===a;return l&&s});return(0,n.jsxs)(c.A,{children:[(0,n.jsxs)(c.A,{sx:{mb:2,display:"flex",gap:2},children:[(0,n.jsx)(o.A,{label:"効果で検索",value:r,onChange:e=>d(e.target.value),fullWidth:!0}),(0,n.jsxs)(A.A,{sx:{minWidth:200},children:[(0,n.jsx)(j.A,{children:"カテゴリで絞込"}),(0,n.jsxs)(u.A,{value:a,label:"カテゴリで絞込",onChange:e=>x(e.target.value),children:[(0,n.jsx)(f.A,{value:"",children:"すべて"}),s.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))]})]}),(0,n.jsx)(g.A,{variant:"contained",onClick:()=>{w(null),N(!0)},children:"新規登録"})]}),(0,n.jsx)(m.A,{component:v.A,children:(0,n.jsxs)(p.A,{children:[(0,n.jsx)(S.A,{children:(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{width:150,children:"カテゴリ"}),(0,n.jsx)(C.A,{children:"効果"}),(0,n.jsx)(C.A,{width:120,children:"操作"})]})}),(0,n.jsx)(y.A,{children:O.map(i=>(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:(e=>{let l=s.find(l=>l.id===e);return(null==l?void 0:l.name)||"その他"})(i.categoryId)}),(0,n.jsx)(C.A,{children:i.description}),(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{onClick:()=>{w(i),N(!0)},size:"small",children:(0,n.jsx)(k.A,{})}),(0,n.jsx)(I.A,{onClick:()=>(s=>{let n=e.filter(e=>e.id!==s);l(n),U.save(n)})(i.id),size:"small",children:(0,n.jsx)(W.A,{})})]})]},i.id))})]})}),(0,n.jsx)(q,{open:E,effect:h,categories:s,onSave:s=>{let n;l(n=h?e.map(e=>e.id===s.id?s:e):[...e,s]),U.save(n),N(!1),w(null)},onClose:()=>{N(!1),w(null)}})]})}var H=s(4193),K=s(4966),L=s(3622),Q=s(7291),T=s(1123);function X(e){let{open:l,relic:s,effects:t,categories:r,onSave:a,onClose:x}=e,[h,o]=(0,i.useState)("赤"),[m,v]=(0,i.useState)(""),[p,S]=(0,i.useState)(""),[b,C]=(0,i.useState)(""),[y,I]=(0,i.useState)(""),[k,W]=(0,i.useState)(""),[w,E]=(0,i.useState)("");(0,i.useEffect)(()=>{if(s){o(s.color),v(s.effects[0]),S(s.effects[1]),C(s.effects[2]);let e=t.find(e=>e.id===s.effects[0]),l=t.find(e=>e.id===s.effects[1]),n=t.find(e=>e.id===s.effects[2]);I((null==e?void 0:e.categoryId)||""),W((null==l?void 0:l.categoryId)||""),E((null==n?void 0:n.categoryId)||"")}else o("赤"),v(""),S(""),C(""),I(""),W(""),E("")},[s,t]);let N=(0,i.useMemo)(()=>y?t.filter(e=>e.categoryId===y):[],[t,y]),O=(0,i.useMemo)(()=>k?t.filter(e=>e.categoryId===k):[],[t,k]),z=(0,i.useMemo)(()=>w?t.filter(e=>e.categoryId===w):[],[t,w]),J=m&&p&&b;return(0,n.jsxs)(M.A,{open:l,onClose:x,maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(B.A,{children:s?"遺物を編集":"遺物を登録"}),(0,n.jsx)(P.A,{children:(0,n.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[(0,n.jsxs)(A.A,{component:"fieldset",children:[(0,n.jsx)(K.A,{component:"legend",children:"色"}),(0,n.jsxs)(L.A,{row:!0,value:h,onChange:e=>o(e.target.value),children:[(0,n.jsx)(Q.A,{value:"赤",control:(0,n.jsx)(T.A,{}),label:"赤"}),(0,n.jsx)(Q.A,{value:"青",control:(0,n.jsx)(T.A,{}),label:"青"}),(0,n.jsx)(Q.A,{value:"黄",control:(0,n.jsx)(T.A,{}),label:"黄"}),(0,n.jsx)(Q.A,{value:"緑",control:(0,n.jsx)(T.A,{}),label:"緑"})]})]}),(0,n.jsx)(d.A,{variant:"subtitle2",sx:{mt:1},children:"効果1"}),(0,n.jsxs)(c.A,{sx:{display:"flex",gap:2},children:[(0,n.jsxs)(A.A,{sx:{width:"20%"},children:[(0,n.jsx)(j.A,{children:"カテゴリ"}),(0,n.jsx)(u.A,{value:y,label:"カテゴリ",onChange:e=>{I(e.target.value),v("")},children:r.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)(A.A,{sx:{width:"80%"},disabled:!y,children:[(0,n.jsx)(j.A,{children:"効果"}),(0,n.jsx)(u.A,{value:m,label:"効果",onChange:e=>v(e.target.value),children:N.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.description},e.id))})]})]}),(0,n.jsx)(d.A,{variant:"subtitle2",sx:{mt:1},children:"効果2"}),(0,n.jsxs)(c.A,{sx:{display:"flex",gap:2},children:[(0,n.jsxs)(A.A,{sx:{width:"20%"},children:[(0,n.jsx)(j.A,{children:"カテゴリ"}),(0,n.jsx)(u.A,{value:k,label:"カテゴリ",onChange:e=>{W(e.target.value),S("")},children:r.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)(A.A,{sx:{width:"80%"},disabled:!k,children:[(0,n.jsx)(j.A,{children:"効果"}),(0,n.jsx)(u.A,{value:p,label:"効果",onChange:e=>S(e.target.value),children:O.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.description},e.id))})]})]}),(0,n.jsx)(d.A,{variant:"subtitle2",sx:{mt:1},children:"効果3"}),(0,n.jsxs)(c.A,{sx:{display:"flex",gap:2},children:[(0,n.jsxs)(A.A,{sx:{width:"20%"},children:[(0,n.jsx)(j.A,{children:"カテゴリ"}),(0,n.jsx)(u.A,{value:w,label:"カテゴリ",onChange:e=>{E(e.target.value),C("")},children:r.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)(A.A,{sx:{width:"80%"},disabled:!w,children:[(0,n.jsx)(j.A,{children:"効果"}),(0,n.jsx)(u.A,{value:b,label:"効果",onChange:e=>C(e.target.value),children:z.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.description},e.id))})]})]})]})}),(0,n.jsxs)(V.A,{children:[(0,n.jsx)(g.A,{onClick:x,children:"キャンセル"}),(0,n.jsx)(g.A,{onClick:()=>{a({id:(null==s?void 0:s.id)||crypto.randomUUID(),color:h,effects:[m,p,b]}),o("赤"),v(""),S(""),C(""),I(""),W(""),E("")},variant:"contained",disabled:!J,children:"保存"})]})]})}function Y(){let[e,l]=(0,i.useState)([]),[s,t]=(0,i.useState)([]),[r,d]=(0,i.useState)([]),[a,x]=(0,i.useState)(""),[h,w]=(0,i.useState)(""),[E,N]=(0,i.useState)(""),[O,z]=(0,i.useState)(null),[J,R]=(0,i.useState)(!1);(0,i.useEffect)(()=>{l(D.getAll()),t(U.getAll()),d(_.getAll())},[]);let F=e=>{let l=s.find(l=>l.id===e);return(null==l?void 0:l.description)||"不明な効果"},M=e.filter(e=>{let l=!h||e.color===h,n=!a||e.effects.some(e=>F(e).includes(a)),i=!E||e.effects.some(e=>{let l=s.find(l=>l.id===e);return(null==l?void 0:l.categoryId)===E});return l&&n&&i});return(0,n.jsxs)(c.A,{children:[(0,n.jsxs)(c.A,{sx:{mb:2,display:"flex",gap:2},children:[(0,n.jsx)(o.A,{label:"効果で検索",value:a,onChange:e=>x(e.target.value),fullWidth:!0}),(0,n.jsxs)(A.A,{sx:{minWidth:150},children:[(0,n.jsx)(j.A,{children:"カテゴリで絞込"}),(0,n.jsxs)(u.A,{value:E,label:"カテゴリで絞込",onChange:e=>N(e.target.value),children:[(0,n.jsx)(f.A,{value:"",children:"すべて"}),r.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)(A.A,{sx:{minWidth:150},children:[(0,n.jsx)(j.A,{children:"色で絞込"}),(0,n.jsxs)(u.A,{value:h,label:"色で絞込",onChange:e=>w(e.target.value),children:[(0,n.jsx)(f.A,{value:"",children:"すべて"}),(0,n.jsx)(f.A,{value:"赤",children:"赤"}),(0,n.jsx)(f.A,{value:"青",children:"青"}),(0,n.jsx)(f.A,{value:"黄",children:"黄"}),(0,n.jsx)(f.A,{value:"緑",children:"緑"})]})]}),(0,n.jsx)(g.A,{variant:"contained",onClick:()=>{z(null),R(!0)},children:"新規登録"})]}),(0,n.jsx)(m.A,{component:v.A,children:(0,n.jsxs)(p.A,{children:[(0,n.jsx)(S.A,{children:(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{width:80,children:"色"}),(0,n.jsx)(C.A,{children:"効果1"}),(0,n.jsx)(C.A,{children:"効果2"}),(0,n.jsx)(C.A,{children:"効果3"}),(0,n.jsx)(C.A,{width:120,children:"操作"})]})}),(0,n.jsx)(y.A,{children:M.map(s=>(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:(0,n.jsx)(H.A,{label:s.color,color:{赤:"error",青:"primary",黄:"warning",緑:"success"}[s.color]})}),(0,n.jsx)(C.A,{children:F(s.effects[0])}),(0,n.jsx)(C.A,{children:F(s.effects[1])}),(0,n.jsx)(C.A,{children:F(s.effects[2])}),(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{onClick:()=>{z(s),R(!0)},size:"small",children:(0,n.jsx)(k.A,{})}),(0,n.jsx)(I.A,{onClick:()=>(s=>{let n=e.filter(e=>e.id!==s);l(n),D.save(n)})(s.id),size:"small",children:(0,n.jsx)(W.A,{})})]})]},s.id))})]})}),(0,n.jsx)(X,{open:J,relic:O,effects:s,categories:r,onSave:s=>{let n;l(n=O?e.map(e=>e.id===s.id?s:e):[...e,s]),D.save(n),R(!1),z(null)},onClose:()=>{R(!1),z(null)}})]})}function Z(e){let{open:l,category:s,onSave:t,onClose:r}=e,[d,a]=(0,i.useState)("");return(0,i.useEffect)(()=>{s?a(s.name):a("")},[s]),(0,n.jsxs)(M.A,{open:l,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(B.A,{children:s?"カテゴリを編集":"カテゴリを登録"}),(0,n.jsx)(P.A,{children:(0,n.jsx)(o.A,{autoFocus:!0,margin:"dense",label:"カテゴリ名",fullWidth:!0,value:d,onChange:e=>a(e.target.value)})}),(0,n.jsxs)(V.A,{children:[(0,n.jsx)(g.A,{onClick:r,children:"キャンセル"}),(0,n.jsx)(g.A,{onClick:()=>{t({id:(null==s?void 0:s.id)||crypto.randomUUID(),name:d}),a("")},variant:"contained",disabled:!d,children:"保存"})]})]})}function $(){let[e,l]=(0,i.useState)([]),[s,t]=(0,i.useState)(null),[r,d]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{l(_.getAll())},[]),(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A,{sx:{mb:2,display:"flex",gap:2,justifyContent:"flex-end"},children:(0,n.jsx)(g.A,{variant:"contained",onClick:()=>{t(null),d(!0)},children:"新規登録"})}),(0,n.jsx)(m.A,{component:v.A,children:(0,n.jsxs)(p.A,{children:[(0,n.jsx)(S.A,{children:(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:"カテゴリ名"}),(0,n.jsx)(C.A,{width:120,children:"操作"})]})}),(0,n.jsx)(y.A,{children:e.map(s=>(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:s.name}),(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{onClick:()=>{t(s),d(!0)},size:"small",children:(0,n.jsx)(k.A,{})}),(0,n.jsx)(I.A,{onClick:()=>(s=>{if(s===J)return void alert("「その他」カテゴリは削除できません。");let n=e.filter(e=>e.id!==s);l(n),_.save(n)})(s.id),size:"small",disabled:s.id===J,children:(0,n.jsx)(W.A,{})})]})]},s.id))})]})}),(0,n.jsx)(Z,{open:r,category:s,onSave:n=>{let i;l(i=s?e.map(e=>e.id===n.id?n:e):[...e,n]),_.save(i),d(!1),t(null)},onClose:()=>{d(!1),t(null)}})]})}function ee(e){let{open:l,nightRunner:s,onSave:t,onClose:r}=e,[d,a]=(0,i.useState)("");return(0,i.useEffect)(()=>{s?a(s.name):a("")},[s]),(0,n.jsxs)(M.A,{open:l,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(B.A,{children:s?"夜渡りを編集":"夜渡りを登録"}),(0,n.jsx)(P.A,{children:(0,n.jsx)(o.A,{autoFocus:!0,margin:"dense",label:"名前",fullWidth:!0,value:d,onChange:e=>a(e.target.value)})}),(0,n.jsxs)(V.A,{children:[(0,n.jsx)(g.A,{onClick:r,children:"キャンセル"}),(0,n.jsx)(g.A,{onClick:()=>{t({id:(null==s?void 0:s.id)||crypto.randomUUID(),name:d}),a("")},variant:"contained",disabled:!d,children:"保存"})]})]})}function el(){let[e,l]=(0,i.useState)([]),[s,t]=(0,i.useState)(null),[r,d]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{l(R.getAll())},[]),(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A,{sx:{mb:2,display:"flex",gap:2,justifyContent:"flex-end"},children:(0,n.jsx)(g.A,{variant:"contained",onClick:()=>{t(null),d(!0)},children:"新規登録"})}),(0,n.jsx)(m.A,{component:v.A,children:(0,n.jsxs)(p.A,{children:[(0,n.jsx)(S.A,{children:(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:"名前"}),(0,n.jsx)(C.A,{width:120,children:"操作"})]})}),(0,n.jsx)(y.A,{children:e.map(s=>(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:s.name}),(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{onClick:()=>{t(s),d(!0)},size:"small",children:(0,n.jsx)(k.A,{})}),(0,n.jsx)(I.A,{onClick:()=>(s=>{let n=e.filter(e=>e.id!==s);l(n),R.save(n)})(s.id),size:"small",children:(0,n.jsx)(W.A,{})})]})]},s.id))})]})}),(0,n.jsx)(ee,{open:r,nightRunner:s,onSave:n=>{let i;l(i=s?e.map(e=>e.id===n.id?n:e):[...e,n]),R.save(i),d(!1),t(null)},onClose:()=>{d(!1),t(null)}})]})}let es=["赤","青","黄","緑","無色"];function en(e){let{open:l,grail:s,nightRunners:t,onSave:r,onClose:d}=e,[a,x]=(0,i.useState)(""),[h,o]=(0,i.useState)("赤"),[m,v]=(0,i.useState)("青"),[p,S]=(0,i.useState)("黄");return(0,i.useEffect)(()=>{s?(x(s.nightRunnerId),o(s.colors[0]),v(s.colors[1]),S(s.colors[2])):(x(""),o("赤"),v("青"),S("黄"))},[s]),(0,n.jsxs)(M.A,{open:l,onClose:d,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(B.A,{children:s?"盃を編集":"盃を登録"}),(0,n.jsx)(P.A,{children:(0,n.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"夜渡り"}),(0,n.jsx)(u.A,{value:a,label:"夜渡り",onChange:e=>x(e.target.value),children:t.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"色1"}),(0,n.jsx)(u.A,{value:h,label:"色1",onChange:e=>o(e.target.value),children:es.map(e=>(0,n.jsx)(f.A,{value:e,children:e},e))})]}),(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"色2"}),(0,n.jsx)(u.A,{value:m,label:"色2",onChange:e=>v(e.target.value),children:es.map(e=>(0,n.jsx)(f.A,{value:e,children:e},e))})]}),(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"色3"}),(0,n.jsx)(u.A,{value:p,label:"色3",onChange:e=>S(e.target.value),children:es.map(e=>(0,n.jsx)(f.A,{value:e,children:e},e))})]})]})}),(0,n.jsxs)(V.A,{children:[(0,n.jsx)(g.A,{onClick:d,children:"キャンセル"}),(0,n.jsx)(g.A,{onClick:()=>{r({id:(null==s?void 0:s.id)||crypto.randomUUID(),nightRunnerId:a,colors:[h,m,p]}),x(""),o("赤"),v("青"),S("黄")},variant:"contained",disabled:!a,children:"保存"})]})]})}function ei(){let[e,l]=(0,i.useState)([]),[s,t]=(0,i.useState)([]),[r,d]=(0,i.useState)(""),[a,x]=(0,i.useState)(null),[h,o]=(0,i.useState)(!1);(0,i.useEffect)(()=>{l(F.getAll()),t(R.getAll())},[]);let w=e.filter(e=>!r||e.nightRunnerId===r),E=e=>({赤:"error",青:"primary",黄:"warning",緑:"success",無色:"default"})[e];return(0,n.jsxs)(c.A,{children:[(0,n.jsxs)(c.A,{sx:{mb:2,display:"flex",gap:2},children:[(0,n.jsxs)(A.A,{sx:{minWidth:200},children:[(0,n.jsx)(j.A,{children:"夜渡りで絞込"}),(0,n.jsxs)(u.A,{value:r,label:"夜渡りで絞込",onChange:e=>d(e.target.value),children:[(0,n.jsx)(f.A,{value:"",children:"すべて"}),s.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))]})]}),(0,n.jsx)(c.A,{sx:{flex:1}}),(0,n.jsx)(g.A,{variant:"contained",onClick:()=>{x(null),o(!0)},children:"新規登録"})]}),(0,n.jsx)(m.A,{component:v.A,children:(0,n.jsxs)(p.A,{children:[(0,n.jsx)(S.A,{children:(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:"夜渡り"}),(0,n.jsx)(C.A,{width:100,children:"色1"}),(0,n.jsx)(C.A,{width:100,children:"色2"}),(0,n.jsx)(C.A,{width:100,children:"色3"}),(0,n.jsx)(C.A,{width:120,children:"操作"})]})}),(0,n.jsx)(y.A,{children:w.map(i=>(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:(e=>{let l=s.find(l=>l.id===e);return(null==l?void 0:l.name)||"不明"})(i.nightRunnerId)}),(0,n.jsx)(C.A,{children:(0,n.jsx)(H.A,{label:i.colors[0],color:E(i.colors[0])})}),(0,n.jsx)(C.A,{children:(0,n.jsx)(H.A,{label:i.colors[1],color:E(i.colors[1])})}),(0,n.jsx)(C.A,{children:(0,n.jsx)(H.A,{label:i.colors[2],color:E(i.colors[2])})}),(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{onClick:()=>{x(i),o(!0)},size:"small",children:(0,n.jsx)(k.A,{})}),(0,n.jsx)(I.A,{onClick:()=>(s=>{let n=e.filter(e=>e.id!==s);l(n),F.save(n)})(i.id),size:"small",children:(0,n.jsx)(W.A,{})})]})]},i.id))})]})}),(0,n.jsx)(en,{open:h,grail:a,nightRunners:s,onSave:s=>{let n;l(n=a?e.map(e=>e.id===s.id?s:e):[...e,s]),F.save(n),o(!1),x(null)},onClose:()=>{o(!1),x(null)}})]})}var et=s(9630),er=s(3664),ed=s(9131);function ea(){let[e,l]=(0,i.useState)([]),[s,t]=(0,i.useState)([]),[r,a]=(0,i.useState)([]),[x,h]=(0,i.useState)([]),[o,I]=(0,i.useState)(""),[k,W]=(0,i.useState)([]),[w,E]=(0,i.useState)([]);(0,i.useEffect)(()=>{l(R.getAll()),t(F.getAll()),a(D.getAll()),h(U.getAll())},[]);let N=e=>{let l=x.find(l=>l.id===e);return(null==l?void 0:l.description)||"不明"};return(0,n.jsxs)(c.A,{children:[(0,n.jsxs)(v.A,{sx:{p:3,mb:3},children:[(0,n.jsx)(d.A,{variant:"h6",sx:{mb:2},children:"複合検索"}),(0,n.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"夜渡り"}),(0,n.jsx)(u.A,{value:o,label:"夜渡り",onChange:e=>I(e.target.value),children:e.map(e=>(0,n.jsx)(f.A,{value:e.id,children:e.name},e.id))})]}),(0,n.jsxs)(A.A,{fullWidth:!0,children:[(0,n.jsx)(j.A,{children:"効果（複数選択可）"}),(0,n.jsx)(u.A,{multiple:!0,value:k,onChange:e=>W("string"==typeof e.target.value?[e.target.value]:e.target.value),input:(0,n.jsx)(et.A,{label:"効果（複数選択可）"}),renderValue:e=>"".concat(e.length,"個選択中"),children:x.map(e=>(0,n.jsxs)(f.A,{value:e.id,children:[(0,n.jsx)(er.A,{checked:k.indexOf(e.id)>-1}),(0,n.jsx)(ed.A,{primary:e.description})]},e.id))})]}),(0,n.jsx)(g.A,{variant:"contained",onClick:()=>{if(!o||0===k.length)return void E([]);let l=s.filter(l=>{let s=e.find(e=>e.id===l.nightRunnerId);return l.nightRunnerId===o||(null==s?void 0:s.name)==="全員"}),n=[];for(let e of l){let l=[],s=new Set;for(let n of e.colors){let e=r.filter(e=>{if(s.has(e.id)||"無色"!==n&&e.color!==n)return!1;let i=e.effects;return k.some(e=>!l.some(l=>l.effects.includes(e))&&i.includes(e))}),i=null,t=0;for(let s of e){let e=new Set;l.forEach(l=>l.effects.forEach(l=>e.add(l)));let n=k.filter(l=>s.effects.includes(l)&&!e.has(l)).length;n>t&&(t=n,i=s)}i&&(l.push(i),s.add(i.id))}let i=new Set;l.forEach(e=>{e.effects.forEach(e=>{k.includes(e)&&i.add(e)})}),i.size===k.length&&n.push({grail:e,relics:l})}E(n)},disabled:!o||0===k.length,children:"検索"})]})]}),w.length>0&&(0,n.jsxs)(c.A,{children:[(0,n.jsxs)(d.A,{variant:"h6",sx:{mb:2},children:["検索結果: ",w.length,"件"]}),w.map((l,s)=>(0,n.jsxs)(v.A,{sx:{p:2,mb:2},children:[(0,n.jsxs)(d.A,{variant:"subtitle1",sx:{mb:1},children:["盃: ",(l=>{let s=e.find(e=>e.id===l);return(null==s?void 0:s.name)||"不明"})(l.grail.nightRunnerId)," - ",l.grail.colors.map(e=>e).join("・")]}),(0,n.jsx)(m.A,{children:(0,n.jsxs)(p.A,{size:"small",children:[(0,n.jsx)(S.A,{children:(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:"色"}),(0,n.jsx)(C.A,{children:"効果1"}),(0,n.jsx)(C.A,{children:"効果2"}),(0,n.jsx)(C.A,{children:"効果3"})]})}),(0,n.jsx)(y.A,{children:l.relics.map(e=>(0,n.jsxs)(b.A,{children:[(0,n.jsx)(C.A,{children:(0,n.jsx)(H.A,{label:e.color,color:{赤:"error",青:"primary",黄:"warning",緑:"success",無色:"default"}[e.color],size:"small"})}),(0,n.jsx)(C.A,{children:N(e.effects[0])}),(0,n.jsx)(C.A,{children:N(e.effects[1])}),(0,n.jsx)(C.A,{children:N(e.effects[2])})]},e.id))})]})})]},s))]}),0===w.length&&o&&k.length>0&&(0,n.jsx)(v.A,{sx:{p:3},children:(0,n.jsx)(d.A,{color:"text.secondary",children:"条件に一致する組み合わせが見つかりませんでした。"})})]})}function ec(){let[e,l]=(0,i.useState)(0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.A,{position:"static",children:(0,n.jsx)(r.A,{children:(0,n.jsx)(d.A,{variant:"h6",component:"div",children:"遺物管理システム"})})}),(0,n.jsxs)(a.A,{maxWidth:"lg",sx:{mt:4},children:[(0,n.jsx)(c.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,n.jsxs)(x.A,{value:e,onChange:(e,s)=>l(s),children:[(0,n.jsx)(h.A,{label:"複合検索"}),(0,n.jsx)(h.A,{label:"遺物"}),(0,n.jsx)(h.A,{label:"効果"}),(0,n.jsx)(h.A,{label:"カテゴリ"}),(0,n.jsx)(h.A,{label:"夜渡り"}),(0,n.jsx)(h.A,{label:"盃"})]})}),0===e&&(0,n.jsx)(ea,{}),1===e&&(0,n.jsx)(Y,{}),2===e&&(0,n.jsx)(G,{}),3===e&&(0,n.jsx)($,{}),4===e&&(0,n.jsx)(el,{}),5===e&&(0,n.jsx)(ei,{})]})]})}}},e=>{e.O(0,[865,58,441,255,358],()=>e(e.s=4135)),_N_E=e.O()}]);